# Interview Prep System Implementation

## Overview
Build the Interview Prep System feature for StoryForge that helps authors prepare for recording sessions with memory prompts, starter phrases, and prep guides generated by AI.

## Database Status
- [x] `questions` table has prep fields: `prep_guide`, `memory_prompts`, `starter_phrase`, `section`
- [x] `question_sections` table exists with: `id`, `project_id`, `section_name`, `question_start`, `question_end`, `completion_percentage`, `status`

## TODO

### 1. Update Database Types
- [x] Add prep fields to questions type in `src/types/database.ts`

### 2. Create API Routes
- [x] Create `src/app/api/projects/[id]/question-sections/route.ts` (GET list, POST create)
- [x] Create `src/app/api/questions/[id]/route.ts` (GET single question with prep, PATCH update prep)
- [x] Create `src/app/api/ai/generate-prep/route.ts` (POST to generate prep using Claude)

### 3. Create UI Components
- [x] Create `src/components/PrepGuideDisplay.tsx` (show memory prompts, starter phrase)
- [x] Create `src/components/SectionProgress.tsx` (show section name and completion)

### 4. Create Interview Prep Page
- [x] Create `src/app/(dashboard)/projects/[id]/prep/page.tsx`
- [x] Create `src/app/(dashboard)/projects/[id]/prep/InterviewPrepQuestion.tsx` (client component)

### 5. Add Navigation Link
- [x] Add "Interview Prep" button to Quick Actions in project detail page

### 6. Verify Build
- [x] Run `npm run build` to verify no errors

## Review

### Summary of Changes

**Files Created (8):**
1. `src/app/api/projects/[id]/question-sections/route.ts` - GET/POST for question sections
2. `src/app/api/questions/[id]/route.ts` - GET/PATCH for individual questions with prep fields
3. `src/app/api/ai/generate-prep/route.ts` - Claude-powered prep guide generation
4. `src/components/PrepGuideDisplay.tsx` - Reusable component for displaying prep materials
5. `src/components/SectionProgress.tsx` - Section progress bar component
6. `src/app/(dashboard)/projects/[id]/prep/page.tsx` - Main Interview Prep page (server component)
7. `src/app/(dashboard)/projects/[id]/prep/InterviewPrepQuestion.tsx` - Question card with prep (client component)

**Files Modified (2):**
1. `src/types/database.ts` - Added prep fields to questions type (prep_guide, memory_prompts, starter_phrase, section, question_number)
2. `src/app/(dashboard)/projects/[id]/page.tsx` - Added "Interview Prep" link to Quick Actions

### Feature Overview

The Interview Prep System allows authors to:
- View all questions organized by sections
- See section-level progress (percentage of questions with prep guides)
- Generate AI-powered prep guides for each question using Claude
- View memory prompts to trigger relevant memories/stories
- See suggested starter phrases to begin recording naturally
- Regenerate prep materials if needed

### API Endpoints

- `GET /api/projects/[id]/question-sections` - List all sections
- `POST /api/projects/[id]/question-sections` - Create new section
- `GET /api/questions/[id]` - Get single question with prep fields
- `PATCH /api/questions/[id]` - Update question prep fields
- `POST /api/ai/generate-prep` - Generate prep guide using Claude AI

### Build Status
Build completed successfully with no errors.
